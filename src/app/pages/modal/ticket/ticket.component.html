<div class="modal fade" id="ticketVenta" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">

  <div class="modal-dialog modal-lg" role="document">

    <div class="modal-content">
      <!-- Modal header -->
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLabel1">Venta</h4>
        <button (click)="resetearModal()" type="button" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">&times;</span></button>
      </div>
      <!-- Fin de Modal header -->

      <!-- Modal Body -->
      <div class="modal-body p-l-5 p-r-5 p-t-0 p-b-0">
        <div class="card-body">

          <!-- Metodo de pago -->
          <form class="form-horizontal p-t-20"
                      ngNativeValidate 
                      #forma="ngForm">

            <div class="form-group row m-b-0">
              <label class="col-sm-3 control-label">Método de Pago*</label>
              <div class="col-sm-9">
                <div class="input-group">
                  <div class="input-group-addon"><i class="ti-exchange-vertical"></i></div>
                  <select class="form-control custom-select" 
                          data-placeholder="Selecciona un método de págo" 
                          name="tipoPago"
                          [(ngModel)]="tipoPago"
                          required>
                    <option value="efectivo">Efectivo</option>
                    <option value="tarjeta">Tarjeta</option>
                    <option value="cheque">Cheque</option>
                  </select>
                  <!-- <input (keyup)="validarFormulario()" name="correo" [(ngModel)]="correo" type="email" class="form-control" placeholder="Correo electrónico"> -->
                </div>
              </div>
            </div>

            <div *ngIf="tipoPago==='efectivo'" class="form-group row m-t-20">
              <label class="col-sm-3 control-label">Efectivo Recibido*</label>
              <div class="col-sm-9">
                <div class="input-group">
                   <div class="input-group-addon"><i class="ti-money"></i></div>
                    <input name="efectivo" 
                               [(ngModel)]="efectivo" 
                               type="string" 
                               class="form-control" 
                               placeholder="Ingresa el efectivo recibido"
                               required>
                 </div>
               </div>
            </div>

            <div class="form-group row m-t-20">
              <div class="offset-sm-3 col-sm-9">
                <div class="checkbox checkbox-success">
                  <input id="checkbox34" 
                         type="checkbox"
                         name="seleccionIva"
                         [(ngModel)]="seleccionIva">
                  <label for="checkbox34">Agregar IVA?</label>
                </div>
              </div>
            </div>

        </form>
            
          <!-- FIN de Metodo de pago -->

          <!-- Documento ticket -->
          <div id="documento-ticket" class="container print-content">

            <!-- Header de cotizacion -->
            <div class="row m-b-5">

              <div class="col col-md-12 m-b-10 p-0">
                  <p class="titulo">MOBLA - MUEBLES E INTERIORISMO</p>
                  <p>Violetas 110, Jardines de Jerez, Leon, Gto, Mx</p>
                  <p>Teléfono: 477-111-11-11</p>
                  <p>correo@mobla.com.mx</p>
                  <p>RFC: aaaaaaaaaaaaaaaa</p>
                  
                  <hr>

                  <p class="big fw-500">Original</p>

                  <p class="fw-500">09 de noviembre de 2018, 3:45 p. m.</p>

              </div>

            </div>
            <!-- Fin de header de cotizacion -->

            <!-- Lista de productos -->
            <div class="row m-b-30">
              <hr>
                <ul class="lista-productos">
                  <li *ngFor="let producto of carrito">
                    <p class="nombre-item-producto">{{ producto.nombre }}</p>
                      <p class="descripcion-item-producto">
                        {{ producto.cantidad }} x {{ producto.precio | number:'1.2-2' }} 
                        <span class="right">{{ producto.total | number:'1.2-2' }}</span></p>
                      <p *ngIf="producto.descuento"
                          class="descripcion-item-producto">Descuento: <span class="right">-{{ producto.descuento | number:'1.2-2' }}</span></p>
                  </li>
                  <br>
                </ul>
              <hr>

              <p><span class="left">Subtotal</span> <span class="right">{{ totalCarrito | currency:'MXN' }}</span></p>
                
              <!-- Detalle de venta con Iva  -->
                <p *ngIf="seleccionIva"><span class="left p-b-10">IVA 16%</span> <span class="right">{{ iva | currency:'MXN' }}</span></p>
                <p *ngIf="seleccionIva" class="fw-500"><span class="left">Total</span> <span class="right big m-b-20">{{ totalCarrito + iva | currency:'MXN' }}</span></p>
              <!-- FIN de Detalle de venta con Iva  -->

              <!-- Detalle de Venta sin Iva -->
                <p *ngIf="!seleccionIva" class="fw-500"><span class="left">Total</span> <span class="right big m-b-20">{{ totalCarrito | currency:'MXN' }}</span></p>
                <p *ngIf="!seleccionIva"><span class="left p-b-10">IVA 0%</span> <span class="right">{{ 0 | currency:'MXN' }}</span></p>
              <!-- FIN de Detalle de Venta sin Iva -->

              <!-- Pago en efectivo -->
                <!-- sin Iva   -->
                <div *ngIf="tipoPago==='efectivo' && seleccionIva===false">
                  <p class="borde"><span class="fw-500 left">Efectivo: </span>  <span class="right">{{ efectivo | currency:'MXN'}}</span></p>
                  <p class="borde sin-borde-top"><span class="left">Cambio: </span> <span class="right">{{ efectivo - totalCarrito | currency:'MXN' }}</span></p>
                </div>
                <!-- FIN de sin Iva -->

                <!-- con Iva -->
                <div *ngIf="tipoPago==='efectivo' && seleccionIva===true">
                  <p class="borde"><span class="fw-500 left">Efectivo: </span> <span class="right">{{ efectivo | currency:'MXN'}}</span></p>
                  <p class="borde sin-borde-top"><span class="left">Cambio: </span> <span class="right">{{ efectivo - (totalCarrito +
                      iva) | currency:'MXN' }}</span></p>
                </div>
                <!-- FIN de con Iva -->
              <!-- FIN de Pago en efectivo -->
              
              <!-- Pago con tarjeta -->
              <div *ngIf="tipoPago==='tarjeta'">
                <p class="borde fw-500">Pago con tarjeta </p>
              </div>
              <!-- FIN de Pago con tarjeta -->

              <!-- Pago con cheque -->
              <div *ngIf="tipoPago==='cheque'">
                <p class="borde fw-500">Pago con cheque</p>
              </div>
              <!-- FIN de Pago con cheque -->


            </div>
            <!-- Fin de tabla de productos -->

            <!-- Recepción de efectivo -->


          


          </div>
          <!-- Fin de documento Cotización -->

        </div>
      </div>
      <!-- Final de Modal Body -->

      <!-- Modal Footer -->
      <div class="modal-footer">

        <!-- Botones -->

        <button type="button" class="btn btn-success waves-effect waves-light" (click)="imprimirTicket()">Imprimir</button>

        <button type="button" class="btn btn-warning waves-effect waves-light" (click)="generarVenta()" [ngClass]="{'disabled': !notaValida}"
          [attr.data-toggle]="(!notaValida)?'tooltip':null" [attr.data-original-title]="(!notaValida)?'Favor de validar la nota':null"
          [attr.data-placement]="(!notaValida)?'bottom':null">Confirmar Venta</button>

        <button type="button" (click)="resetearModal()" class="btn btn-danger waves-effect waves-light" data-dismiss="modal">Salir</button>
        <!-- Fin de botones -->

      </div>
      <!-- Fin de Modal Footer -->

    </div>
  </div>
</div>